# MJ-Translate 手动更新指南

## 当自动更新失败时的解决方案

### 问题描述
当程序显示"下载地址不可用"或"更新有问题"时，通常是由于网络环境无法访问GitHub下载服务器导致的。

### 解决方案

#### 方案一：手动下载更新

1. **获取最新版本信息**
   - 访问项目发布页面: https://github.com/yuanxiao9889/MJ-translate/releases/latest
   - 查看最新版本号和更新说明

2. **下载更新文件**
   选择以下任一下载链接：
   - 主要链接: `https://github.com/yuanxiao9889/MJ-translate/archive/refs/tags/[版本号].zip`
   - 备用链接: `https://codeload.github.com/yuanxiao9889/MJ-translate/zip/refs/tags/[版本号]`
   
   将 `[版本号]` 替换为实际版本号，如 `v1.0.2`

3. **放置更新文件**
   - 在程序根目录创建 `manual_update` 文件夹
   - 将下载的ZIP文件放入该文件夹
   - 重新运行更新程序

#### 方案二：网络环境优化

1. **更换DNS服务器**
   - 设置DNS为 `8.8.8.8` 和 `8.8.4.4`
   - 或使用 `114.114.114.114` 和 `114.114.115.115`

2. **检查网络限制**
   - 暂时关闭防火墙和杀毒软件
   - 检查企业网络是否限制GitHub访问
   - 尝试使用移动热点网络

3. **使用代理或VPN**
   - 如果在受限网络环境中，考虑使用代理服务

#### 方案三：离线更新模式

程序现在支持离线更新模式：
1. 当检测到网络问题时，程序会自动切换到离线模式
2. 显示详细的手动下载指导
3. 支持使用手动下载的文件进行更新

### 常见问题

**Q: 为什么GitHub API可以访问，但下载失败？**
A: GitHub使用不同的服务器提供API和文件下载服务。API服务器（api.github.com）和下载服务器（github.com/codeload.github.com）可能有不同的网络路由。

**Q: 下载速度很慢怎么办？**
A: 可以尝试使用下载工具（如IDM、迅雷等）或在网络较好的时间段下载。

**Q: 手动更新后程序还是提示有更新？**
A: 检查下载的文件版本号是否正确，确保放置在正确的 `manual_update` 目录中。

### 技术说明

更新失败的主要原因：
1. DNS解析问题：无法解析 `codeload.github.com` 域名
2. 网络连接超时：连接 `github.com` 超时
3. 防火墙拦截：企业网络或安全软件阻止访问
4. 地理位置限制：某些地区访问GitHub受限

程序已实施的改进：
- 移除不稳定的下载源
- 增加重试机制
- 支持离线更新模式
- 提供详细的错误信息和解决建议
